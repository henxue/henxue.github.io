<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-title" content="恨雪博客">
<title>帝国CMS整合百度编辑器UEditor1.2.4 UTF-8_恨雪博客 - 专注帝国CMS网站建设及模版制作 | www.henxue.net</title>
<link rel='stylesheet' id='main-css'  href='/skin/xiu/css/style.css' type='text/css' media='all' />
<link rel='canonical' href='帝国CMS整合百度编辑器UEditor1.2.4 UTF-8' />
<meta name="keywords" content="" />
<meta name="description" content="帝国CMS整合百度编辑器UEditor1.2.4 UTF-8" />
<!--[if lt IE 9]><script src="/skin/xiu/js/html5.js"></script><![endif]-->
</head>
<body>
<section class="container">
  <header class="header">
    <div class="logo"><a href="/" title="恨雪博客 - 专注帝国CMS网站建设及模版制作 | www.henxue.net">恨雪博客</a></div>
    <ul class="nav">
<li><a href="/" target="_self">首页</a></li>
<li><a class='current'  href="/tutorials/" target="_blank">帝国教程</a></li>
<li><a   href="/template/" target="_blank">帝国模版</a></li>
<li><a   href="/plug/" target="_blank">插件模块</a></li>
<li><a   href="/news/" target="_blank">业界新闻</a></li>
<li><a   href="/website/" target="_blank">建站相关</a></li>
<li><a   href="/design/" target="_blank">前端设计</a></li>
<li><a   href="/lnmpa/" target="_blank">LNMPA</a></li>
<li><a   href="/seo/" target="_blank">SEO</a></li>
<li><a   href="/blog/" target="_blank">网络日志</a></li>
    
    </ul>
    <div class="feeds"> <a class="feed feed-rss" rel="external nofollow" href="http://feed.feedsky.com/hengxue" title="Feed订阅恨雪博客" target="_blank">订阅</a> <a class="feed feed-weibo" rel="external nofollow" href="http://weibo.com/hongrongshun" title="关注博主新浪微博" target="_blank">新浪微博</a> <a class="feed feed-tqq" rel="external nofollow" href="http://t.qq.com/rosonho" title="关注博主腾讯微博" target="_blank">腾讯微博</a> <a class="feed feed-weixin" rel="external nofollow" href="javascript:;">关注微信</a> </div>
    <div class="slinks">QQ:415245871</div>
  </header>
  <div class="content-wrap">
    <div class="content">
      <header class="article-header">
        <h1 class="article-title"><a href="/article/101.html">帝国CMS整合百度编辑器UEditor1.2.4 UTF-8</a></h1>
        <ul class="article-meta">
          <li>henxue 发布于 4小时前</li>
          <li>分类：<a href="/tutorials/" title="查看帝国教程中的全部文章" rel="category tag">帝国教程</a></li>
          <li class="post-views">阅读(<script src=/e/public/ViewClick/?classid=1&id=101&addclick=1></script>)</li>
          <li><a href="#pinglun" title="去发表你的看法">评论</a></li>
          <li></li>
        </ul>
      </header>
      <article class="article-content">			<p>恨雪曾经写过一个帝国CMS简单整合百度编辑器的<a title="帝国CMS后台整合百度编辑器" href="http://www.henxue.net/133.html" target="_blank">教程</a>，教程虽然简单，但是存在以下几个问题：</p><p>一，图片没写入数据库。</p><p>二，图片没办法加水印</p><p>三，有时候会失灵（增加信息的时候提示新闻字段为空）</p><p>&nbsp;</p><p>因为我是一个最求最新版本的人，所以一直没采用帝国论坛pkkgu网友提供的这个<a href="http://bbs.phome.net/showthread-42-277471-0.html" target="_blank">教程</a>，因为他整合的编辑器是1.2.4的，而最新的是1.3.6.（我是不是有病？！）</p><p>没办法，因为解决不了上面的三个问题，我只能强制忍掉自己的这个最求最新版的毛病（话说我是狮子座不是处女座啊）</p><p>下载他的这个文件（已经整合好，在百度编辑器原版的基础上有所修改），下载地址：<a href="http://www.hzapi.com/html/ecms_ueditor.php">http://www.hzapi.com/html/ecms_ueditor.php</a></p><p>以下是作者所修改的文件说明：</p><pre>//==========UEditor 修改记录 整合系统可以忽略以下内容，升级编辑器是可以参考 ===============下面为增加的文件(GBK和UTF-8代码完全一样，仅页面编码不同，自动识别UTF-8编码，自动转换编码)php/editor.php           实例化页面php/upload.php           提交处理分类php/upload_ecms_fun.php  帝国ECMS7.0处理附件部分jquery-1.8.3.min.js      JQuery本地化(需要1.8.3版本，以下报错)下面的文件建议删除php/imageUp.phpphp/scrawlUp.phpphp/fileUp.phpphp/getRemoteImage.phpphp/imageManager.phpphp/getContent.php------------------------------------------------------------------------------------------一、图片和 WORD转存增加三项：附加参数，图片类型，图片大小dialogs/image/image.htmldialogs/imagworde/image.htmlext:'{"param1":"value1", "param2":"value2"}',改为ext:editor.img_ext,*.gif;*.jpeg;*.png;*.jpg改为'+editor.img_type+'maxSize:4,改为maxSize:editor.img_size,------------------------------------------------------------------------------------------二、在线浏览图片和添加背景图片时POST增加附加参数 dialogs/image/image.jsdialogs/background/background.jsaction:"get",改为data:editor.show_img_ext,------------------------------------------------------------------------------------------三、附件增加三项：附加参数，附件类型，附件大小 dialogs/attachment/attachment.htmlpost_params:{"PHPSESSID":"&lt;?php echo session_id(); ?&gt;"},改为post_params:editor.file_ext,file_types:"*.*",改为file_types:editor.file_type,file_size_limit:"100 MB",改为file_size_limit:editor.file_size+" MB", ------------------------------------------------------------------------------------------四、涂鸦 dialogs/scrawl/scrawl.js （POST涂鸦数据时加附加参数）涂鸦可以取得cookiescontent:base64,增加一行data:editor.scrawl_data,------------------------------------------------------------------------------------------五、配置文件 editor_all.js和editor_all_min.js （远程保存图片的附加参数）onerror:callbacks["error"]增加,data:editor.img_url_ext</pre><p>由于他所提供的是GBK版本，UTF8版本的朋友可以用convertz802这个软件转一下就好了。</p><p>以下整合教程转自原作者网站。</p><p>使用方法：</p><p>一、系统——管理数据表——管理字段——修改newstext字段——“输入表单”和“投稿表单”html代码，换成下面代码</p><pre>&lt;?php include(ECMS_PATH.'/e/data/ecmseditor/ueditor/php/editor.php');?&gt;</pre><p>二、将UEditor文件夹放到/e/data/ecmseditor目录下</p><p>三、就是这么简单。初级用用户到此，帝国ECMS7.0+UEditor1.2.4就已经整合完成！</p><p><strong>高级应用</strong></p><pre>&lt;?php//自定义编辑器字段（不设置默认帝国新闻字段newstext）例如：简介字段加上编辑器$field      = 'smalltext';// 1加水印 0不水印$getmark    = 1;//附件存入指定栏目$ue_classid  = 1;//编辑器工具栏设置$toolbars     = "'Source','Bold','Underline','ForeColor','RemoveFormat','AutoTypeSet','Undo','Redo'";//编辑器宽度 值true、false和数值$ue_width   = '1000';//编辑器高度 值true、false和数值$ue_height  = '320';//不设默认引用JQurey-1.8.3，值为1不引用$ue_jquery  = 1;include(ECMS_PATH.'/e/data/ecmseditor/ueditor/php/editor.php');?&gt;</pre><p>PS：由于我需要加水印，所以我的字段代码替换为：</p><pre>&lt;?php$getmark    = 1;include(ECMS_PATH.'/e/data/ecmseditor/ueditor/php/editor.php');?&gt;</pre><p>下面提供一下我已经转好的<a href="http://pan.baidu.com/s/1kTkGjYZ" target="_self">UTF-8版</a>和<a href="http://pan.baidu.com/s/1jGv9G1o" target="_blank">convertz802</a></p><p>感谢一下帝国论坛pkkgu网友！</p>		</article>
      <div class="article-social"> <a href="javascript:;" class="action" data-pid="5429" data-event="like"><i class="glyphicon glyphicon-thumbs-up"></i>赞 (<span>0</span>)</a> <a href="#pinglun" class="action" data-event="login"><i class="glyphicon glyphicon-comment"></i>评论</a> <span class="action action-share bdsharebuttonbox"> <i class="glyphicon glyphicon-share"></i>分享 (<span class="bds_count" data-cmd="count"></span>)
        <div class="action-popover">
          <div class="popover top in">
            <div class="arrow"></div>
            <div class="popover-content"><a class="bds_qzone" data-cmd="qzone"></a><a class="bds_tsina" data-cmd="tsina"></a><a class="bds_weixin" data-cmd="weixin"></a><a class="bds_tqq" data-cmd="tqq"></a><a class="bds_sqq" data-cmd="sqq"></a><a class="bds_renren" data-cmd="renren"></a></div>
          </div>
        </div>
        </span> </div>
      <div class="article-tags"><div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></div>
      <div class="relates">
        <h3 class="title"><strong>相关阅读</strong></h3>
        <ul>
         
        </ul>
      </div>
      <h3 class="title" id="pinglun"></h3>
      <!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread" data-category="1" data-thread-key="101" 
	data-title="帝国CMS整合百度编辑器UEditor1.2.4 UTF-8" data-author-key="" data-url=""></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"henxue"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
<!--<script>
		  function CheckPl(obj)
		  {
		  if(obj.saytext.value=="")
		  {
		  alert("您没什么话要说吗？");
		  obj.saytext.focus();
		  return false;
		  }
		  return true;
		  }
		  </script><form action="/e/pl/doaction.php" method="post" name="saypl" id="saypl" onsubmit="return CheckPl(document.saypl)">
<table width="100%" border="0" cellpadding="0" cellspacing="0" id="plpost">

<tr>
<td><table width="100%" border="0" cellpadding="0" cellspacing="0" class="title">
<tr>
<td><strong>发表评论</strong></td>
<td align="right"><a href="/e/pl/?classid=1&amp;id=101">共有<span><script type="text/javascript" src="/e/public/ViewClick/?classid=1&id=101&down=2"></script></span>条评论</a></td>
</tr>
</table>
<table width="100%" border="0" cellspacing="10" cellpadding="0">
<tr>
<td><table width="100%" border="0" cellpadding="0" cellspacing="2">
<tr>
<td width="56%" align="left">用户名:
<input name="username" type="text" class="inputText" id="username" value="" size="16" /></td>
<td width="44%" align="left">密码:
<input name="password" type="password" class="inputText" id="password" value="" size="16" /></td>
</tr>
<tr>
<td align="left">验证码:
<input name="key" type="text" class="inputText" size="10" />
<img src="/e/ShowKey/?v=pl" align="absmiddle" /> </td>
<td align="left"><input name="nomember" type="checkbox" id="nomember" value="1" checked="checked" />
匿名发表</td>
</tr>
</table>
<textarea name="saytext" rows="6" id="saytext"></textarea><input name="imageField" type="image" src="/e/data/images/postpl.gif"/>
<input name="id" type="hidden" id="id" value="101" />
<input name="classid" type="hidden" id="classid" value="1" />
<input name="enews" type="hidden" id="enews" value="AddPl" />
<input name="repid" type="hidden" id="repid" value="0" />
<input type="hidden" name="ecmsfrom" value="/article/101.html"></td>
</tr>
</table>
</td>
</tr>
</table></form>-->
    </div>
  </div>
  <aside class="sidebar">
    <div class="widget widget_tags">
      <h3 class="title"><strong>热门标签</strong></h3>
      <ul class="widget_tags_inner">
<li><a title="点击查看所有关于站长的文章" href="/tags/../../tags/zhanzhang/">站长</a></li>
<li><a title="点击查看所有关于谷歌的文章" href="/tags/../../tags/google/">谷歌</a></li>
<li><a title="点击查看所有关于百度的文章" href="/tags/../../tags/baidu/">百度</a></li>
 	  
      </ul>
    </div>
    <div class="widget widget_searchbox">
      <h3 class="title"><strong>搜索文章</strong></h3>
<form accept-charset="utf-8" method="get" action="http://www.baidu.com/baidu" target="_blank" class="search-form">
<input type="text" name="word" class="form-control" placeholder="输入关键字" autofocus="" x-webkit-speech="">
<input type="submit" class="btn" value="搜索" name="submit">
        <input type="hidden" value="baidulocal" name="tn">
        <input type="hidden" value="3" name="cl">
        <input type="hidden" value="2097152" name="ct">
        <input type="hidden" value="henxue.net" name="si">
      </form>     
    </div>
    <script src="/d/js/acmsd/thea1.js"></script>
    <div class="widget widget_postlist">
      <h3 class="title"><strong>最新文章</strong></h3>
      <ul>
        
<li><a href="/article/66.html"><span class="thumbnail"><img data-original="" class="thumb"/></span><span class="text">结合项在列表页调用内容字段名称</span><span class="text-muted post-views">阅读(0)</span></a></li>
        
<li><a href="/article/69.html"><span class="thumbnail"><img data-original="" class="thumb"/></span><span class="text">帝国CMS动态页分页标签[!---show.listpage--]的一</span><span class="text-muted post-views">阅读(0)</span></a></li>
        
<li><a href="/article/68.html"><span class="thumbnail"><img data-original="" class="thumb"/></span><span class="text">灵动标签中用if判断第X条附加特殊样式</span><span class="text-muted post-views">阅读(0)</span></a></li>
        
<li><a href="/article/71.html"><span class="thumbnail"><img data-original="" class="thumb"/></span><span class="text">帝国CMS列表模板过滤简介的Html代码</span><span class="text-muted post-views">阅读(0)</span></a></li>
        
<li><a href="/article/70.html"><span class="thumbnail"><img data-original="" class="thumb"/></span><span class="text">帝国CMS修改列表页中当前分页的显示方式</span><span class="text-muted post-views">阅读(0)</span></a></li>
        
<li><a href="/article/73.html"><span class="thumbnail"><img data-original="" class="thumb"/></span><span class="text">帝国CMS中$navinfor和$GLOBALS的一些使用小技巧</span><span class="text-muted post-views">阅读(0)</span></a></li>
  	  
      </ul>
    </div>
  </aside>  
  <footer class="footer"> &copy; 2014 <a href="/">恨雪博客</a> &nbsp; 感谢 <a href="http://www.alibaixiu.com" target="_blank">阿里百秀</a> &nbsp; <a href="/sitemap.xml" target="_blank">网站地图</a> </footer>
  <div class="rollto"><a href="javascript:;"></a></div>
</section>
<script type='text/javascript' src='/skin/xiu/js/jquery.js?ver=1.0.1'></script> 
<script type='text/javascript' src='/skin/xiu/js/bootstrap.js?ver=1.0.1'></script> 
<script type='text/javascript' src='/skin/xiu/js/custom.js?ver=1.0.1'></script>
</body>
</html>